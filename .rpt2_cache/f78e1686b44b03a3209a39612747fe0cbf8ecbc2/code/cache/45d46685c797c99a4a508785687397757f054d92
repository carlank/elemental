{"map":"{\"version\":3,\"file\":\"index.js\",\"sourceRoot\":\"\",\"sources\":[\"../../src/index.ts\"],\"names\":[],\"mappings\":\"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\"}","code":"import * as Canvas from './canvas';\r\nimport { Player } from './player';\r\nvar grid = Array();\r\nvar width = 1;\r\nvar height = 1;\r\nvar clickPower = 1;\r\nvar speed = 10; // higher is slower\r\nvar player = new Player();\r\nfunction prettify(num) {\r\n    return (Math.round(num * 100) / 100);\r\n}\r\nvar updateGrid = function () {\r\n    // 'Flow' from high to low density\r\n    for (var x = 0; x < width; x++) {\r\n        for (var y = 0; y < height; y++) {\r\n            var variance = Math.random() / speed;\r\n            if (x > 0) {\r\n                if (grid[x - 1][y] * 1.1 < grid[x][y]) {\r\n                    grid[x - 1][y] += variance * (grid[x][y] - grid[x - 1][y]);\r\n                    grid[x][y] -= variance * (grid[x][y] - grid[x - 1][y]);\r\n                }\r\n            }\r\n            if (x < width - 1) {\r\n                if (grid[x + 1][y] * 1.1 < grid[x][y]) {\r\n                    grid[x + 1][y] += variance * (grid[x][y] - grid[x + 1][y]);\r\n                    grid[x][y] -= variance * (grid[x][y] - grid[x + 1][y]);\r\n                }\r\n            }\r\n            if (y > 0) {\r\n                if (grid[x][y - 1] * 1.1 < grid[x][y]) {\r\n                    grid[x][y - 1] += variance * (grid[x][y] - grid[x][y - 1]);\r\n                    grid[x][y] -= variance * (grid[x][y] - grid[x][y - 1]);\r\n                }\r\n            }\r\n            if (y < height - 1) {\r\n                if (grid[x][y + 1] * 1.1 < grid[x][y]) {\r\n                    grid[x][y + 1] += variance * (grid[x][y] - grid[x][y + 1]);\r\n                    grid[x][y] -= variance * (grid[x][y] - grid[x][y + 1]);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    const suckFactor = 1e-2;\r\n    // suckFactor% gets added to Player Mana, 90% of that is taken from Cell\r\n    for (var x = 0; x < width; x++) {\r\n        for (var y = 0; y < height; y++) {\r\n            player.mana += grid[x][y] * suckFactor;\r\n            grid[x][y] *= 1 - suckFactor * 0.9;\r\n        }\r\n    }\r\n    // Visual Stuff now\r\n    $('#log').html('');\r\n    for (var a = 0; a < width; a++) {\r\n        for (var b = 0; b < height; b++) {\r\n            var strung = prettify(grid[b][a]).toString();\r\n            $('#log').append(strung + ' ' + -prettify(grid[a][b] * suckFactor) + '/tick');\r\n        }\r\n        $('#log').append($('<br/>'));\r\n    }\r\n};\r\nfunction gridOnClick(e) {\r\n    var yo = Canvas.getCursorPosition(e);\r\n    let power = grid[yo.row][yo.column] < 100 - clickPower ? clickPower : Math.max(100 - grid[yo.row][yo.column], 0);\r\n    power = Math.min(power, player.mana); // player.mana >= power ? power : player.mana; // ......doy\r\n    grid[yo.row][yo.column] += power;\r\n    player.mana -= power;\r\n}\r\nvar initGrid = function () {\r\n    $('#log').html('');\r\n    for (var a = 0; a < 10; a++) {\r\n        grid.push(Array());\r\n        for (var b = 0; b < 10; b++) {\r\n            grid[a].push(0);\r\n            $('#log').append(grid[a][b] + ' ');\r\n        }\r\n        $('#log').append($('<br/>'));\r\n    }\r\n};\r\nfunction init() {\r\n    initGrid();\r\n    Canvas.initCanvas(gridOnClick, width, height);\r\n}\r\nfunction run() {\r\n    if (player.mana >= 100 * width + 1 && width < 10 && height < 10) {\r\n        player.mana -= 100 * width + 1;\r\n        width += 1;\r\n        height += 1;\r\n    }\r\n    updateGrid();\r\n    Canvas.updateCanvas(grid, width, height);\r\n    $('#log').append('Mana: ' + prettify(player.mana));\r\n    $('#crafting').append('Testing');\r\n}\r\ninit();\r\nsetInterval(run, 100);\r\n//# sourceMappingURL=index.js.map"}
